Geonames Golang client
======================
[![Release](https://img.shields.io/github/release/platx/geonames.svg?style=flat-square)](https://github.com/platx/geonames/releases/latest)
[![Software License](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square)](LICENSE)
[![codecov](https://codecov.io/github/platx/geonames/graph/badge.svg?token=LJGZBO88CF)](https://codecov.io/github/platx/geonames)
[![build status](https://github.com/platx/geonames/actions/workflows/test.yaml/badge.svg)](https://github.com/platx/geonames/actions/workflows/ci.yml)
[![godoc](https://godoc.org/github.com/platx/geonames?status.svg)](https://godoc.org/github.com/platx/geonames)
[![Go Report Card](https://goreportcard.com/badge/github.com/platx/geonames?style=flat-square)](https://goreportcard.com/report/github.com/platx/geonames)

This is a simple Golang client for the [Geonames](http://www.geonames.org/) API. It supports both [Webservice API](https://www.geonames.org/export/web-services.html) and [Download server](https://download.geonames.org/export/dump/).

## Features
* Easy-to-use Golang wrapper for Geonames API.
* Includes web service endpoints and downloadable data processing.
* Implements various API services like country info, nearby locations, postal codes, and Wikipedia data.
* Streaming data processing for large files.

# Installation

```bash
go get github.com/platx/geonames
```

# Usage

## Webservices

### Webservice usage example
```go
package main

import (
	"context"
	"fmt"
	"log"

	"github.com/platx/geonames/webservice"
)

func main() {
	client := webservice.NewClient("your-username")
	result, err := client.Search(context.Background(), webservice.SearchRequest{
		Name: "London",
	})
	if err != nil {
		log.Fatal(err)
	}
	
	fmt.Println(result)
}
```

### Supported API services
Refer to the following table to check supported and implemented endpoints (emoji ✅ is clickable).

| WebService                                                                                                       | Implemented                                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [astergdem](https://www.geonames.org/export/web-services.html#astergdem )                                        | [✅](./webservice/astergdem.go)                | Elevation - Aster Global Digital Elevation Model V2 2011.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [children](https://www.geonames.org/export/place-hierarchy.html#children)                                        | [✅](./webservice/children.go)                 | Returns the children (admin divisions and populated places) for a given geonameId. The children are the administrative divisions within an other administrative division, like the counties (ADM2) in a state (ADM1) or also the countries in a continent. The leafs are populated places, other feature classes like spots, mountains etc are not included in this service. Use the search service if you need other feature classes as well.                                                                                                                              |
| [contains](https://www.geonames.org/export/place-hierarchy.html#contains)                                        | [✅](./webservice/contains.go)                 | Returns all features within the GeoName feature for the given geoNameId. It only returns contained features when a polygon boundary for the input feature is defined.                                                                                                                                                                                                                                                                                                                                                                                                       |
| [countryCode](https://www.geonames.org/export/web-services.html#countrycode)                                     | [✅](./webservice/country_code.go)             | Returns the iso country code for the given latitude/longitude.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [countryInfo](https://www.geonames.org/export/web-services.html#countryInfo)                                     | [✅](./webservice/country_info.go)             | Country Info (Bounding Box, Capital, Area in square km, Population)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [countrySubdivision](https://www.geonames.org/export/web-services.html#countrysubdiv)                            | [✅](./webservice/country_subdivision.go)      | The iso country code and the administrative subdivision of any given point.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [earthquakes](https://www.geonames.org/export/JSON-webservices.html#earthquakesJSON)                             | [✅](./webservice/earthquakes.go)              | Returns a list of earthquakes, ordered by magnitude.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [extendedFindNearby](https://www.geonames.org/export/web-services.html#extendedFindNearby)                       | ❌                                             | Extended Find nearby toponym / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [findNearby](https://www.geonames.org/export/web-services.html#findNearby)                                       | [✅](./webservice/find_nearby.go)              | Find nearby toponym / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [findNearbyPlaceName](https://www.geonames.org/export/web-services.html#findNearbyPlaceName)                     | [✅](./webservice/find_nearby_place_name.go)   | Find nearby populated place / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [findNearbyPostalCodes](https://www.geonames.org/export/web-services.html#findNearbyPostalCodes)                 | [✅](./webservice/find_nearby_postal_codes.go) | Find nearby postal codes / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [findNearbyStreets](https://www.geonames.org/maps/us-reverse-geocoder.html#findNearbyStreets)                    | ❌                                             | Finds the nearest street for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [findNearbyStreetsOSM](https://www.geonames.org/maps/osm-reverse-geocoder.html#findNearbyStreetsOSM)             | ❌                                             | Finds the nearest streets for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [findNearByWeather](https://www.geonames.org/export/JSON-webservices.html#findNearByWeatherJSON)                 | [✅](./webservice/find_nearby_weather.go)      | Weather Station with most recent weather observation / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [findNearbyWikipedia](https://www.geonames.org/export/wikipedia-webservice.html#findNearbyWikipedia)             | [✅](./webservice/find_nearby_wikipedia.go)    | Find nearby Wikipedia Entries / reverse geocoding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [findNearestAddress](https://www.geonames.org/maps/us-reverse-geocoder.html#findNearestAddress)                  | ❌                                             | Finds the nearest street and address for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [findNearestIntersection](https://www.geonames.org/maps/us-reverse-geocoder.html#findNearestIntersection)        | ❌                                             | Finds the nearest intersection for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [findNearestIntersectionOSM](https://www.geonames.org/maps/osm-reverse-geocoder.html#findNearestIntersectionOSM) | ❌                                             | Finds the nearest street and the next crossing street for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [findNearbyPOIsOSM](https://www.geonames.org/maps/osm-reverse-geocoder.html#findNearbyPOIsOSM)                   | ❌                                             | Finds the nearest points of interests for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [address](https://www.geonames.org/maps/addresses.html#address)                                                  | [✅](./webservice/address.go)                  | Finds the nearest street and address for a given lat/lng pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [geoCodeAddress](https://www.geonames.org/maps/addresses.html#geoCodeAddress)                                    | [✅](./webservice/geo_code_address.go)         | Returns the location lat/lng for a given address.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [streetNameLookup](https://www.geonames.org/maps/addresses.html#streetNameLookup)                                | [✅](./webservice/street_name_lookup.go)       | Returns a list of streets which start with the search term.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [get](https://www.geonames.org/export/web-services.html#get)                                                     | [✅](./webservice/get.go)                      | Get geoNames feature for geoNameId.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [gtopo30](https://www.geonames.org/export/web-services.html#gtopo30)                                             | [✅](./webservice/gtopo30.go)                  | GTOPO30 is a global digital elevation model (DEM) with a horizontal grid spacing of 30 arc seconds (approximately 1 kilometer). GTOPO30 was derived from several raster and vector sources of topographic information.                                                                                                                                                                                                                                                                                                                                                      |
| [hierarchy](https://www.geonames.org/export/place-hierarchy.html#hierarchy)                                      | [✅](./webservice/hierarchy.go)                | Returns all GeoNames higher up in the hierarchy of a place name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [neighbourhood](https://www.geonames.org/export/web-services.html#neighbourhood)                                 | ❌                                             | The neighbourhood for US cities. Data provided by Zillow under cc-by-sa license.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [neighbours](https://www.geonames.org/export/place-hierarchy.html#neighbours)                                    | [✅](./webservice/neighbours.go)               | Returns all neighbours for a country or administrative division. (coverage: all countries on country level, and lower levels.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [ocean](https://www.geonames.org/export/web-services.html#ocean )                                                | [✅](./webservice/ocean.go)                    | Returns the ocean or sea for the given latitude/longitude.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [postalCodeCountryInfo](https://www.geonames.org/export/web-services.html#postalCodeCountryInfo)                 | ❌                                             | Countries for which postal code geocoding is available.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [postalCodeLookup](https://www.geonames.org/export/web-services.html#postalCodeLookupJSON)                       | [✅](./webservice/postal_code_lookup.go)       | Returns a list of places for the given postal code, sorted by postal code, place name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [postalCodeSearch](https://www.geonames.org/export/web-services.html#postalCodeSearch)                           | [✅](./webservice/postal_code_search.go)       | Returns a list of postal codes and places for the place name/postal code query as xml document. For the US the first returned zip code is determined using zip code area shapes, the following zip codes are based on the centroid. For all other supported countries all returned postal codes are based on centroids.                                                                                                                                                                                                                                                     |
| [rssToGeo](https://www.geonames.org/rss-to-georss-converter.html)                                                | ❌                                             | The GeoNames "RSS to GeoRSS Converter" reads the entries of an RSS feed and searches the GeoNames Database to find a location for the entry text. If a relevant location is found, its latitude and longitude are added to the RSS feed using the GeoRSS encoding.                                                                                                                                                                                                                                                                                                          |
| [search](https://www.geonames.org/export/geonames-search.html)                                                   | [✅](./webservice/search.go)                   | Returns the names found for the search term.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [siblings](https://www.geonames.org/export/place-hierarchy.html#siblings)                                        | [✅](./webservice/siblings.go)                 | Returns all siblings of a GeoNames toponym with feature class A.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [srtm1](https://www.geonames.org/export/web-services.html#srtm1)                                                 | [✅](./webservice/srtm1.go)                    | A single number giving the elevation in meters according to srtm1, ocean areas have been masked as "no data" and have been assigned a value of -32768.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [srtm3](https://www.geonames.org/export/web-services.html#srtm3)                                                 | [✅](./webservice/srtm3.go)                    | Shuttle Radar Topography Mission (SRTM) elevation data. SRTM consisted of a specially modified radar system that flew onboard the Space Shuttle Endeavour during an 11-day mission in February of 2000. The dataset covers land areas between 60 degrees north and 56 degrees south. This web service is using SRTM3 data with data points located every 3-arc-second (approximately 90 meters) on a latitude/longitude grid. Data voids in the original SRTM files have been filled by cgiar. Thanks to Andy Jarvis and Cgiar to allow GeoNames to use the processed data. |
| [timezone](https://www.geonames.org/export/web-services.html#timezone)                                           | [✅](./webservice/timezone.go)                 | The timezone at the lat/lng with gmt offset (1. January) and dst offset (1. July).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [weather](https://www.geonames.org/export/JSON-webservices.html#weatherJSON)                                     | [✅](./webservice/weather.go)                  | Returns a list of weather stations with the most recent weather observation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [weatherIcao](https://www.geonames.org/export/JSON-webservices.html#weatherIcaoJSON)                             | [✅](./webservice/weather_icao.go)             | Returns the weather station and the most recent weather observation for the ICAO code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [wikipediaBoundingBox](https://www.geonames.org/export/wikipedia-webservice.html#wikipediaBoundingBox)           | [✅](./webservice/wikipedia_bounding_box.go)   | Returns the wikipedia entries within the bounding box.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [wikipediaSearch](https://www.geonames.org/export/wikipedia-webservice.html#wikipediaSearch)                     | [✅](./webservice/wikipedia_search.go)         | Returns the wikipedia entries found for the search term.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

# Download

### Download usage example
```go
package main

import (
	"context"
	"fmt"
	"log"

	"github.com/platx/geonames/download"
)

func main() {
	client := download.NewClient()
	res, err := client.AllCountries(context.Background())
	if err != nil {
		log.Fatal(err)
	}
	
	for item, err := range res {
		if err != nil {
			log.Fatal(err)
		}

		log.Println(item)
	}
}
```

### Supported files
Refer to the following table to check supported and implemented files (emoji ✅ is clickable).

| File name                                                                                | Implemented                                      | Description                                                                                                                                                                                                                                                                              |
|------------------------------------------------------------------------------------------|--------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| XX.zip                                                                                   | [✅](./download/by_country.go)                    | features for country with iso code XX, see 'geoname' table for columns.                                                                                                                                                                                                                  |
| [no-country.zip](https://download.geonames.org/export/dump/no-country.zip)               | [✅](./download/no_country.go)                    | features not belonging to a country.                                                                                                                                                                                                                                                     |
| [allCountries.zip](https://download.geonames.org/export/dump/allCountries.zip)           | [✅](./download/all_countries.go)                 | all countries combined in one file, see 'geoname' table for columns.                                                                                                                                                                                                                     |
| [cities500.zip](https://download.geonames.org/export/dump/cities500.zip)                 | [✅](./download/cities.go)                        | all cities with a population > 500 or seats of adm div down to PPLA4 (ca 185.000), see 'geoname' table for columns.                                                                                                                                                                      |
| [cities1000.zip](https://download.geonames.org/export/dump/cities1000.zip)               | [✅](./download/cities.go)                        | all cities with a population > 1000 or seats of adm div down to PPLA3 (ca 130.000), see 'geoname' table for columns.                                                                                                                                                                     |
| [cities5000.zip](https://download.geonames.org/export/dump/cities5000.zip)               | [✅](./download/cities.go)                        | all cities with a population > 5000 or PPLA (ca 50.000), see 'geoname' table for columns.                                                                                                                                                                                                |
| [cities15000.zip](https://download.geonames.org/export/dump/cities15000.zip)             | [✅](./download/cities.go)                        | all cities with a population > 15000 or capitals (ca 25.000), see 'geoname' table for columns.                                                                                                                                                                                           |
| [alternateNamesV2.zip](https://download.geonames.org/export/dump/alternateNamesV2.zip)   | [✅](./download/alternate_names.go)               | alternate names with language codes and geonameId, file with iso language codes, with new columns from and to.                                                                                                                                                                           |
| [alternateNames.zip](https://download.geonames.org/export/dump/alternateNames.zip)       | ❌                                                | obsolete use V2, this file does not have the new columns to and from and will be removed in the future.                                                                                                                                                                                  |
| [admin1CodesASCII.txt](https://download.geonames.org/export/dump/admin1CodesASCII.txt)   | [✅](./download/admin_division.go)                | names in English for admin divisions. Columns: code, name, name ascii, geonameid.                                                                                                                                                                                                        |
| [admin2Codes.txt](https://download.geonames.org/export/dump/admin2Codes.txt)             | [✅](./download/admin_division.go)                | names for administrative subdivision 'admin2 code' (UTF8), Format : concatenated codes <tab>name <tab> asciiname <tab> geonameId.                                                                                                                                                        |
| [iso-languagecodes.txt](https://download.geonames.org/export/dump/iso-languagecodes.txt) | [✅](./download/languages.go)                     | iso 639 language codes, as used for alternate names in file alternateNames.zip.                                                                                                                                                                                                          |
| featureCodes_xx.txt                                                                      | [✅](./download/feature_codes.go)                 | name and description for feature classes and feature codes.                                                                                                                                                                                                                              |
| [timeZones.txt](https://download.geonames.org/export/dump/timeZones.txt)                 | [✅](./download/time_zones.go)                    | countryCode, timezoneId, gmt offset on 1st of January, dst offset to gmt on 1st of July (of the current year), rawOffset without DST.                                                                                                                                                    |
| [countryInfo.txt](https://download.geonames.org/export/dump/countryInfo.txt)             | [✅](./download/country_info.go)                  | country information : iso codes, fips codes, languages, capital ,...                                                                                                                                                                                                                     |
| modifications-{date}.txt                                                                 | [✅](./download/modifications.go)                 | all records modified on the previous day, the date is in yyyy-MM-dd format. You can use this file to daily synchronize your own geonames database.                                                                                                                                       |
| deletes-{date}.txt                                                                       | [✅](./download/deletes.go)                       | all records deleted on the previous day, format : geonameId <tab> name <tab> comment.                                                                                                                                                                                                    |
| alternateNamesModifications-{date}.txt                                                   | [✅](./download/alternate_names_modifications.go) | all alternate names modified on the previous day.                                                                                                                                                                                                                                        |
| alternateNamesDeletes-{date}.txt                                                         | [✅](./download/alternate_names_deletes.go)       | all alternate names deleted on the previous day, format : alternateNameId <tab> geonameId <tab> name <tab> comment.                                                                                                                                                                      |
| [userTags.zip](https://download.geonames.org/export/dump/userTags.zip)                   | [✅](./download/user_tags.go)                     | user tags , format : geonameId <tab> tag.                                                                                                                                                                                                                                                |
| [hierarchy.zip](https://download.geonames.org/export/dump/hierarchy.zip)                 | [✅](./download/hierarchy.go)                     | parentId, childId, type. The type 'ADM' stands for the admin hierarchy modeled by the admin1-4 codes. The other entries are entered with the user interface. The relation toponym-adm hierarchy is not included in the file, it can instead be built from the admincodes of the toponym. |
| [adminCode5.zip](https://download.geonames.org/export/dump/adminCode5.zip)               | [✅](./download/admin_division.go)                | the new adm5 column is not yet exported in the other files (in order to not break import scripts). Instead it is availabe as separate file.                                                                                                                                              |

# License

* This package is licensed under the [MIT License](./LICENSE). Feel free to use it in your open-source and commercial projects.
* GeoNames data is free and licensed under the [Creative Commons Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/). You should give credit to GeoNames when using data or web services with a link or another reference to GeoNames.

# Contribution

Feel free to submit issues and pull requests to improve functionality and coverage. Please make sure to add tests for new features.
